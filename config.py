# Standard imports
import base64
import os

# Third-party imports
from dotenv import load_dotenv
load_dotenv()


def get_env_var(name: str) -> str:
    value: str | None = os.environ.get(name)
    if value is None:
        raise ValueError(f"Environment variable {name} not set.")
    return value


# GitHub Credentials from environment variables
GITHUB_API_URL: str = "https://api.github.com"
GITHUB_API_VERSION: str = "2022-11-28"
GITHUB_APP_ID: str = get_env_var(name="GITHUB_APP_ID")
GITHUB_PRIVATE_KEY_ENCODED: str = get_env_var(name="GITHUB_PRIVATE_KEY")
# GITHUB_PRIVATE_KEY_ENCODED="LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBd2ZRVGl5anlEL1FkaFNSOGpUYlJsWFlvNXZFZUN4ZWJIUERwRUlrakpQZy9ueVZpCmpuWTJuU1pmZWpBMzVLQ1A4M3RjTnI5Z3RhOXZwU01oZkpyaWFVeDlWV21JTzR0T0piN3Zhd3lnNFk0cUl0ajkKdUUrQW9vRFBmVkY0OUs3ejk2U3RWTUNucnh4WHJPLzNCbU5RZys1bmp4SHJOdjZuamgvZXVvTS8rSTBsR2EvaAoyMFdVWWlpYjNqem4zMit4bElVVFpRSGpUVDdlVi9UZkxSVlp3cjZocnRnSm9IdmJndlZZM0EwdXRqNUlKSnNIClIvbmlvVzBWdEkvMUkrWWRiRm9QY2pxbEMwVWUrSjFKQ0s2bVR3VG0zcFRXOFNncUVVVGtiZUJBelZXYTFMVk4KZVpSVEkrZWI5aWZFc0Q4WjNDU0hIQnJYS2dNTzhhN0FwZWJIZlFJREFRQUJBb0lCQUVCMEx5WjR4ZkI5VEc0WgprUGFRdUJkMk8rTjdUMk9hUmFiWmZHcE5XSXVKb0FMd05vOW5RNEQzNXBUQmYyR1A1aWFnNFNVa2Rpd0trQXlOCjN5djhnSzlEaHdjaVdlNkh2Y0dYY1JMZkVIdkVkY1k4M0J3cTkzR0pZdXFmYjVYSXFqU3EyaHNuSnRKdmxjZFgKdTN5NDltSFJrVUtmVHM1bzFCL01BWVZ6NW9kZk5Fd1BXUnZINmozUlg5dHJCSGtRbzdwb00zL1NEZGFxQzBZdQpiQ3MrZmQvOW1Ma0FRY0ZIamRSWEtjcXdvMW5lM3dvS0YwR3FTKzNONFdVUlV6bTRwT2x3TVp1UEwzWUZ2allxCi80UlZUak1hakxQbTdkRDhIOTNwWG9FdnZjVGZFVFNWQnNRSmg3MmgzMVFwOHRsbGZUbE9pVXBaaEp5ZEZ6UzQKOCs4TjNqVUNnWUVBNHVzWXhyeUp2a25mV0c1bTN4azNmNEYwODFHU2s2V3NUQWJYclhPbER1a3B1RkJ2RCs4SApTRWUvV1BSL3JsME93MVB4bEZ3LzBmdTZuclhvNHl3RGpVNHQyczMvYmM3VlRwaFU1VlVQOEVYclFqY3BsT0hMClJMTUo4WkVDUG96OHlHcGJKdVJTL05qYlU5Y0pEaE1pdUxWNlR6VjlkVWgxd1daWWdCYzVaQ01DZ1lFQTJzOXgKTlNlVnBWY3dVQVE4eFBaQ00za0NsZFRvQzRkMTlrTWhPOUJJRVRsVzd3MEl4Nlh4c3l0YXNnaDF5c3VIdktsWApmbE5TNzdMSU5VeTluSnlFN204OTZFT1p1S05uUGdMR0VsaGlVbjUrcHNDeUF1ZUhHNkJNbVZXYklHVHd3a3JlCis4dk4yakFXZkN0NGUxc0MrNHhMOE5LMGV2T2xRclY1aUFNemo5OENnWUJ0L0E5TlBGTHpKWEVZdHFJcjNsZ1UKK0JWTVhpeFNYZ210Njk4YjFpS1pvSSsxSTE5QmROU3R4d0RLeCs4ZS8wSEprT1ZWeUlTeWJYV2R1WVFBbi9PMAp5TURXL2VPaFFKQUpBVEtjMldiWlNicG1wTUFGeG84MFpDY2NxL0ZQaWh4M3MzMHMwNXdacTY1YTY2NGE0VkdCCi80d2gya1pOMDJvbjdFaFhCV3F1eXdLQmdRQ3BtcWZtaXNOZEFNTXJFczNENGhvWWFkRU9NSlNZOHl3RmNhMWQKL3FrTjZNTXcwb3FlcmtzMkZRSGRBOS9DREpjdkxwZnFERTQ2Qy90U0RTVGdNeFo2OXZFbWl0ZXBuY2NWOHZKegpIOTAra2x3N2h4dTBVcUNRVW1WdGFVU3dERzN1UERpeE5oMWU1VzFZWEIyc2lEUThwVmZyMkhjYTRxYVRtYlVWCkwxNFZRd0tCZ0Z1R1U5WHlTcTRDNFZlT3RqQXc1YXdsdGR5dVdpLzNkZVpiZ3hHS04wWnIwbEdQNTdwWFhCZkEKYXgzYUVBYnQrZEgyOWcvOTd4VnloUFkvcHc2a055Zit1akpWNDNTazdBaC9UUTZZOHNBRSt6YjBVTWFDLzd0dAp1NDZnN25BTFlDc0JWWDFRMlljMkxjWGRmelFJNFNvWHcxU3JzTTdac2pWQXZqNXdSc3A4Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="
GITHUB_PRIVATE_KEY: bytes = base64.b64decode(s=GITHUB_PRIVATE_KEY_ENCODED)
GITHUB_WEBHOOK_SECRET: str = get_env_var(name="GITHUB_WEBHOOK_SECRET")

# OpenAI Credentials from environment variables
OPENAI_API_KEY: str = get_env_var(name="OPENAI_API_KEY")
OPENAI_FINAL_STATUSES: list[str] = ["cancelled", "completed", "expired", "failed"]
OPENAI_MAX_TOKENS = 4096
OPENAI_MODEL_ID = "gpt-4-turbo-preview"
OPENAI_ORG_ID: str = get_env_var(name="OPENAI_ORG_ID")
OPENAI_TEMPERATURE = 0.0

# Supabase Credentials from environment variables
SUPABASE_SERVICE_ROLE_KEY: str = get_env_var(name="SUPABASE_SERVICE_ROLE_KEY")
SUPABASE_URL: str = get_env_var(name="SUPABASE_URL")

# General
ENV: str = get_env_var(name="ENV")
PRODUCT_ID: str = get_env_var(name="PRODUCT_ID")
PRODUCT_NAME = "GitAuto"
TIMEOUT_IN_SECONDS = 120
